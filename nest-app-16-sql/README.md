## 表关联

现实世界中，不会存在孤立的情况，物体之间都是互相关联的。

比如一个学生肯定在一个班级中，那么学生和班级就会存在关系，基本上是 1对多的关系

那么假如有一张学生表，一张班级表，

学生表中存了很多学生，每个学生肯定有一个班级的属性来代表她在哪一个班级中。

班级表中肯定存了很多班级，每个班级都是有一个id的。

那么学生表中的学生根据什么查找班级呢？就根据她的班级属性。那么，这个班级属性就可以设置为外键。

通过外键，我们将多个表关联起来

## 关联表的影响级别

- set null：当班级id变化的时候，所有这个班级的学生的班级属性都变为null了，也就是说这些学生没有班级属性了！
- CASCADE：当班级id变化的时候，所有这个班级的学生的班级id都相应的做出改变
- RESTRICT 或者 NO ACTION：当班级id变化的时候，会检测是否有学生在这个班级中。如果有，无法修改！ 如果没有学生在这个班级中，它就可以发生变化。

## 如何查询2张表之间有关联的数据？



```sql
-- 使用join语法
SELECT * FROM user JOIN class ON user.class_id = class.id;
```

## left join和right join

left join就是将左表数据全部查询出来，无视关联关系

right join就是将右表数据全部查询出来，无视关联关系

一对一和一对多都是相同的方式，可以使用外键来添加关联

## 多对多

多对多我们一般会添加一个中间表来保存双方的外键，各自表中不会存放外键

## 子查询

```sql
-- 从部门表中查询部门的名称
-- 其中查出来的每一条都再去执行子sql
-- 如果子sql没有查到数据，也就是这个部门没有员工，那就不显示出这个部门
SELECT name FROM department
    WHERE EXISTS (
        SELECT * FROM employee WHERE department.id = employee.department_id
    );
```

